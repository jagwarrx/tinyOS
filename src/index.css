/* Import JetBrains Mono font */
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global Developer/Terminal-style Typography */
@layer base {
  body {
    font-family: 'JetBrains Mono', 'Fira Code', 'Source Code Pro', 'IBM Plex Mono', 'Monaco', 'Consolas', 'Menlo', monospace;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    letter-spacing: 0.01em; /* Slightly wider for monospace readability */
    font-feature-settings: 'liga' 1, 'calt' 1; /* Enable ligatures for Fira Code */
  }

  /* Terminal-style font weights */
  .font-light { font-weight: 300; }
  .font-normal { font-weight: 400; }
  .font-medium { font-weight: 500; }
  .font-semibold { font-weight: 600; }
  .font-bold { font-weight: 700; }

  /* Clean, high-contrast text rendering */
  * {
    text-rendering: geometricPrecision;
  }
}

/* Theme System CSS Variables */
/* These are dynamically set by the theme system */
:root {
  /* Background colors */
  --color-bg-primary: #2c2e34;
  --color-bg-secondary: #23252b;
  --color-bg-tertiary: #1d1f24;
  --color-bg-elevated: #33353b;

  /* Foreground/text colors */
  --color-fg-primary: #e2e2e3;
  --color-fg-secondary: #a7a9b0;
  --color-fg-tertiary: #7f8490;
  --color-fg-inverse: #2c2e34;

  /* Border colors */
  --color-border-primary: #3f4149;
  --color-border-secondary: #2f3139;
  --color-border-focus: #b39df3;

  /* Semantic colors */
  --color-semantic-error: #fc5d7c;
  --color-semantic-warning: #e7c664;
  --color-semantic-success: #9ed072;
  --color-semantic-info: #76cce0;

  /* Accent colors */
  --color-accent-primary: #b39df3;
  --color-accent-secondary: #76cce0;
  --color-accent-hover: #c4b0f7;
  --color-accent-active: #9d83ef;

  /* Editor colors */
  --color-editor-text: #e2e2e3;
  --color-editor-bg: #2c2e34;
  --color-editor-bold: #e7c664;
  --color-editor-code: #76cce0;
  --color-editor-highlight: #e7c664;
  --color-editor-highlight-text: #2c2e34;

  /* Syntax colors */
  --color-syntax-red: #fc5d7c;
  --color-syntax-orange: #f39660;
  --color-syntax-yellow: #e7c664;
  --color-syntax-green: #9ed072;
  --color-syntax-blue: #76cce0;
  --color-syntax-purple: #b39df3;
  --color-syntax-grey: #7f8490;
}

/* Custom editor styles - Sublime Text inspired */
.editor-input {
  min-height: 200px;
  line-height: 1.6;
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  color: var(--color-editor-text);
  background-color: var(--color-editor-bg);
  outline: none;
}

.editor-placeholder {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  color: var(--color-fg-tertiary);
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}

/* Remove ALL list styling by default */
.editor-input ul,
.editor-input ol {
  list-style: none;
  padding: 0;
  margin: 0;
}

.editor-input li {
  color: var(--color-editor-text);
}

/* Drag and drop styling */
.editor-input li[draggable="true"] {
  cursor: move;
  transition: opacity 0.2s ease, background-color 0.2s ease;
  pointer-events: auto;
}

.editor-input li[draggable="true"]:hover {
  background-color: rgba(59, 130, 246, 0.05);
  border-radius: 4px;
}

:root:not(.dark) .editor-input li[draggable="true"]:hover {
  background-color: rgba(59, 130, 246, 0.08);
}

.editor-input li[draggable="true"]:active {
  cursor: grabbing;
}

/* Bullet lists - Level 1 */
.editor-input ul > li {
  position: relative;
  padding-left: 24px;
  margin-left: 0;
  margin-bottom: 4px;
}

.editor-input ul > li::before {
  content: "•";
  position: absolute;
  left: 8px;
  color: var(--color-editor-text);
  font-size: 0.7em;
  line-height: 1.8;
  pointer-events: none;
}

/* Nested bullets - consistent 24px indent per level */
.editor-input ul ul {
  margin-top: 4px;
  padding-left: 24px;
}

/* Hide markers from wrapper li elements and don't count them */
.editor-input li:has(> ul:only-child)::before,
.editor-input li:has(> ol:only-child)::before {
  display: none !important;
}

.editor-input li:has(> ul:only-child),
.editor-input li:has(> ol:only-child) {
  counter-increment: none !important;
}

/* Numbered lists - Level 1: 1. 2. 3. */
.editor-input ol {
  counter-reset: item;
}

.editor-input ol > li {
  counter-increment: item;
  position: relative;
  padding-left: 32px;
  margin-bottom: 4px;
}

.editor-input ol > li::before {
  content: counter(item) ". ";
  position: absolute;
  left: 0;
  color: var(--color-editor-text);
  min-width: 24px;
  pointer-events: none;
}

/* Level 2: i. ii. iii. - consistent 24px indent */
.editor-input ol ol {
  counter-reset: item2;
  padding-left: 24px;
  margin-top: 4px;
}

.editor-input ol ol > li {
  counter-increment: item2;
  padding-left: 32px;
}

.editor-input ol ol > li::before {
  content: counter(item2, lower-roman) ". ";
  left: 0;
  min-width: 24px;
}

/* Level 3: a. b. c. - consistent 24px indent */
.editor-input ol ol ol {
  counter-reset: item3;
  padding-left: 24px;
}

.editor-input ol ol ol > li {
  counter-increment: item3;
  padding-left: 32px;
}

.editor-input ol ol ol > li::before {
  content: counter(item3, lower-alpha) ". ";
  left: 0;
  min-width: 24px;
}

/* Level 4 and beyond - consistent pattern */
.editor-input ol ol ol ol {
  counter-reset: item4;
  padding-left: 24px;
}

.editor-input ol ol ol ol > li {
  counter-increment: item4;
  padding-left: 32px;
}

.editor-input ol ol ol ol > li::before {
  content: counter(item4, decimal) ". ";
  left: 0;
  min-width: 24px;
}

/* Text formatting styles */
.editor-input .editor-text-bold,
.editor-input span[data-lexical-text="true"][style*="font-weight: bold"],
.editor-input span[data-lexical-text="true"][style*="font-weight:bold"] {
  color: var(--color-editor-bold) !important;
  font-weight: normal !important;
}

/* Electric blue text (code format repurposed) */
.editor-input .editor-text-blue,
.editor-input code.editor-text-blue {
  color: var(--color-editor-code) !important;
  font-weight: normal !important;
  font-family: inherit !important;
  background: none !important;
  padding: 0 !important;
  border-radius: 0 !important;
  font-size: inherit !important;
}

.editor-input .editor-text-underline {
  text-decoration: underline;
}

.editor-input .editor-text-italic {
  font-style: italic;
}

.editor-input .editor-text-strikethrough {
  text-decoration: line-through;
}

.editor-input .editor-text-highlight {
  background-color: var(--color-editor-highlight);
  color: var(--color-editor-highlight-text);
}

/* Bold - yellow text (for strong tags if rendered) */
.editor-input strong,
.editor-input .text-yellow-400 {
  color: var(--color-editor-bold);
  font-weight: normal;
}

/* Highlight */
.editor-input mark {
  background-color: var(--color-editor-highlight);
  color: var(--color-editor-highlight-text);
}

/* Smooth transitions for theme switching */
* {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* ============================================
   HACKER / TERMINAL UI MODE
   ============================================ */

.ui-hacker {
  /* Remove all rounded corners */
  --border-radius: 0px;
}

/* Remove rounded corners globally */
.ui-hacker * {
  border-radius: 0 !important;
}

/* Typography hierarchy - Bold for headings/labels */
.ui-hacker h1,
.ui-hacker h2,
.ui-hacker h3,
.ui-hacker h4,
.ui-hacker label,
.ui-hacker .font-semibold,
.ui-hacker .font-bold {
  font-weight: 700 !important;
  letter-spacing: 0.02em;
}

/* Regular weight for secondary text */
.ui-hacker .text-xs,
.ui-hacker .text-sm:not(.font-medium):not(.font-semibold):not(.font-bold),
.ui-hacker p,
.ui-hacker span:not(.font-medium):not(.font-semibold):not(.font-bold) {
  font-weight: 400;
}

/* Remove all box shadows */
.ui-hacker *,
.ui-hacker *:hover,
.ui-hacker *:focus {
  box-shadow: none !important;
}

/* Simple border-based focus states */
.ui-hacker *:focus {
  outline: 2px solid var(--color-border-focus);
  outline-offset: -2px;
}

/* Text-based buttons (no background fills) */
.ui-hacker button:not(.primary-action) {
  background: transparent !important;
  border: 1px solid var(--color-border-primary);
}

.ui-hacker button:not(.primary-action):hover {
  border-color: var(--color-border-focus);
  background: transparent !important;
}

/* Primary actions keep their background */
.ui-hacker button.primary-action,
.ui-hacker .bg-accent-primary,
.ui-hacker .bg-\[#1DB954\],
.ui-hacker .bg-red-600 {
  /* Keep colored backgrounds for important actions */
}

/* List items with text-based indicators */
.ui-hacker .task-item::before {
  content: "[ ]";
  margin-right: 8px;
  color: var(--color-border-primary);
}

.ui-hacker .task-item.completed::before {
  content: "[×]";
  color: var(--color-syntax-green);
}

/* Tab navigation - text underline only */
.ui-hacker .tab-nav {
  border-bottom: 1px solid var(--color-border-primary);
}

.ui-hacker .tab-nav button {
  border: none;
  border-bottom: 2px solid transparent;
  background: transparent;
}

.ui-hacker .tab-nav button.active {
  border-bottom-color: var(--color-accent-primary);
  font-weight: 700;
}

/* Cards/panels - border only, no background differentiation */
.ui-hacker .card,
.ui-hacker .panel {
  border: 1px solid var(--color-border-primary);
  background: transparent;
}

/* Inputs - simple borders */
.ui-hacker input,
.ui-hacker textarea,
.ui-hacker select {
  border: 1px solid var(--color-border-primary);
  background: var(--color-bg-primary);
}

.ui-hacker input:focus,
.ui-hacker textarea:focus,
.ui-hacker select:focus {
  border-color: var(--color-border-focus);
  outline: none;
}

/* Status badges - text-based with brackets */
.ui-hacker .status-badge {
  padding: 2px 8px;
  border: 1px solid currentColor;
  background: transparent !important;
  font-weight: 700;
  letter-spacing: 0.05em;
}

/* Modal - full border, no shadow */
.ui-hacker .modal {
  border: 2px solid var(--color-border-primary);
}

/* Icons - reduce visual weight */
.ui-hacker svg {
  stroke-width: 1.5;
}

/* Progress bars - ASCII style */
.ui-hacker .progress-bar {
  border: 1px solid var(--color-border-primary);
  background: transparent;
}

.ui-hacker .progress-fill {
  background: var(--color-accent-primary);
}

/* Sidebar - clear separation with border */
.ui-hacker .sidebar {
  border-right: 1px solid var(--color-border-primary);
}

/* Table-like layouts for data */
.ui-hacker .data-row {
  border-bottom: 1px solid var(--color-border-secondary);
  padding: 8px 0;
}

.ui-hacker .data-label {
  font-weight: 700;
  text-transform: uppercase;
  font-size: 0.75rem;
  letter-spacing: 0.05em;
}

.ui-hacker .data-value {
  font-weight: 400;
}

/* Terminal-style timestamps and metadata */
.ui-hacker .timestamp,
.ui-hacker .metadata {
  font-weight: 400;
  font-size: 0.75rem;
  color: var(--color-fg-tertiary);
  font-family: inherit;
}

/* Remove hover elevation effects */
.ui-hacker *:hover {
  transform: none !important;
}

/* Scrollbar - minimal */
.ui-hacker *::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.ui-hacker *::-webkit-scrollbar-track {
  background: transparent;
}

.ui-hacker *::-webkit-scrollbar-thumb {
  background: var(--color-border-primary);
  border: none;
}

.ui-hacker *::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-focus);
}

/* Custom Scrollbar - Light Theme */
:root:not(.dark) * {
  scrollbar-width: thin;
  scrollbar-color: #cbd5e1 #f8fafc;
}

:root:not(.dark) *::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

:root:not(.dark) *::-webkit-scrollbar-track {
  background: #f8fafc;
  border-radius: 6px;
}

:root:not(.dark) *::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 6px;
  border: 2px solid #f8fafc;
}

:root:not(.dark) *::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

:root:not(.dark) *::-webkit-scrollbar-corner {
  background: #f8fafc;
}

/* Custom Scrollbar - Dark Theme */
.dark * {
  scrollbar-width: thin;
  scrollbar-color: #4b5563 #1f2937;
}

.dark *::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

.dark *::-webkit-scrollbar-track {
  background: #1f2937;
  border-radius: 6px;
}

.dark *::-webkit-scrollbar-thumb {
  background: #4b5563;
  border-radius: 6px;
  border: 2px solid #1f2937;
}

.dark *::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

.dark *::-webkit-scrollbar-corner {
  background: #1f2937;
}

/* Note navigation animations */
@keyframes slideFromTop {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideFromBottom {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideFromLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideFromRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-slide-from-top {
  animation: slideFromTop 0.3s ease-out;
}

.animate-slide-from-bottom {
  animation: slideFromBottom 0.3s ease-out;
}

.animate-slide-from-left {
  animation: slideFromLeft 0.3s ease-out;
}

.animate-slide-from-right {
  animation: slideFromRight 0.3s ease-out;
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

/* Saved badge animation - subtle and unobtrusive */
@keyframes savedBadgeFadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 0.7;
    transform: translateY(0);
  }
}

.animate-saved-badge {
  animation: savedBadgeFadeIn 0.4s ease-out forwards;
}

/* Task badge sliding animation */
.task-badges-container {
  position: relative;
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  justify-content: flex-end;
  min-width: 0;
}

/* Initially hide all badges except status */
.task-badges-container > *:not(.status-badge) {
  max-width: 0;
  opacity: 0;
  overflow: hidden;
  margin: 0;
  padding: 0;
  transition: max-width 0.3s ease, opacity 0.2s ease, margin 0.3s ease, padding 0.3s ease;
}

/* On hover, reveal other badges and slide status left */
.group:hover .task-badges-container > *:not(.status-badge) {
  max-width: 100px;
  opacity: 1;
  transition: max-width 0.3s ease 0.5s, opacity 0.2s ease 0.5s, margin 0.3s ease 0.5s, padding 0.3s ease 0.5s;
}

/* Status badge animation - starts at right, slides left on hover */
.task-badges-container .status-badge {
  transition: all 0.3s ease;
  transition-delay: 0s;
}

.group:hover .task-badges-container .status-badge {
  transition-delay: 0.5s;
}

/* On Today page, hide status badge initially */
.task-badges-container .today-status {
  max-width: 0;
  opacity: 0;
  overflow: hidden;
  margin: 0;
  padding: 0;
  transition: max-width 0.3s ease, opacity 0.2s ease, margin 0.3s ease, padding 0.3s ease;
}

/* On Today page hover, reveal status badge after delay */
.group:hover .task-badges-container .today-status {
  max-width: 100px;
  opacity: 1;
  transition: max-width 0.3s ease 0.5s, opacity 0.2s ease 0.5s, margin 0.3s ease 0.5s, padding 0.3s ease 0.5s;
}

/* Claude-style loading animation - innovative wave bounce */
@keyframes loadingWave {
  0%, 60%, 100% {
    transform: translateY(0) scale(1);
    opacity: 0.4;
  }
  30% {
    transform: translateY(-8px) scale(1.1);
    opacity: 1;
  }
}

.animate-loading-wave {
  animation: loadingWave 1.4s ease-in-out infinite;
}